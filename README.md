# spring-boot-microservice

Example of Spring Boot REST API microservice integrated with:

* [Kafka](https://kafka.apache.org/): communication with other service
* [MS SQL Server](https://www.microsoft.com/en-us/sql-server): relational database
* [Couchbase](https://www.couchbase.com/): non-relational database

> Designed to work with Unix-based OS (Linux/macOS). Tested only on Ubuntu 20 LTS. Some adjustments may be needed to make it work on Windows

## API documentation

The REST API documentation is automatically generated by [SpringFox](https://springfox.github.io/springfox/) and by default can be accessed from http://localhost:8080/swagger-ui/

## Dependencies

Dependencies to run the service:

* Docker 20.x
* Docker-compose 1.26.x

## Testing

Unit testing:

```
docker build -t spring-boot-microservice_service:latest service/
docker run -v $HOME/.m2:/root/.m2 -v service:/root/service spring-boot-microservice_service:latest mvn clean test
```

> The `-v $HOME/.m2:/root/.m2` option is to mount local Maven repository to avoid redownloading available packages

Integration testing (from project root):

```
docker-compose run service /bin/sh -c "./wait-for-it.sh mssql:1433 -s -t 90 -- mvn clean test -Dtests=integration"; docker-compose down;
```

## Running

Steps to run the service:

* Make sure all `ports` mentioned in docker-compose.yml are free
* Build and run containers: `docker-compose up -d`
* Open the Swagger API doc at http://localhost:8080/swagger-ui/
* Shutdown containers: `docker-compose down`
